# Agent Development Guide

This document provides guidance for AI agents working with this Flet Controls Showcase application.

## Project Overview

This is a Flet demonstration application showcasing various UI controls and interactive features. It serves as a reference implementation and testing ground for Flet UI components.

## Technology Stack

- **Framework**: Flet 0.80.0 (Python UI framework powered by Flutter)
- **Python Version**: 3.12+
- **Package Manager**: uv (DO NOT USE pip, poetry, or any other package manager)
- **Asset Management**: Local assets stored in `assets/` directory

## IMPORTANT: uv Project Guidelines

**THIS IS A uv PROJECT. DO NOT POLLUTE IT WITH OTHER DEPENDENCY MANAGEMENT TOOLS.**

### Working with uv

1. **Install Dependencies**: Use `uv sync` to install dependencies from `pyproject.toml`
2. **Run Applications**: Use `uv run <script.py>` to execute Python scripts
3. **Add Dependencies**: Update `pyproject.toml` and run `uv sync`
4. **Virtual Environment**: uv automatically manages a virtual environment in `.venv`

### Forbidden Actions

- ❌ Do NOT use `pip install`
- ❌ Do NOT use `poetry`
- ❌ Do NOT use `conda`
- ❌ Do NOT create separate virtual environments
- ❌ Do NOT modify `uv.lock` manually

### Required Actions

- ✅ Use `uv run main.py` to run the application
- ✅ Use `uv sync` to update dependencies
- ✅ Use `uv add <package>` to add new dependencies
- ✅ Use `uv remove <package>` to remove dependencies

## Coding Conventions

### Type Annotations

- **Required**: All functions must have type annotations
- **Style**: Use modern Python 3.12+ syntax (`int | None` instead of `Optional[int]`)
- **Imports**: Use `from typing import` for complex types

### Code Formatting

- **Line Length**: 100 characters maximum
- **Indentation**: 4 spaces (no tabs)
- **Quote Style**: Double quotes for strings
- **Imports**: Grouped by standard library, third-party, local (with blank lines between)

### Static Analysis

Run these commands before committing:

```bash
# Format code
uv run ruff format .

# Lint code
uv run ruff check .

# Fix linting issues automatically
uv run ruff check . --fix
```

### Testing

```bash
# Run all tests
uv run pytest

# Run specific test file
uv run pytest test/test_file.py

# Run specific test
uv run pytest test/test_file.py::test_function_name
```

## Project Structure

```
.
├── assets/          # Local image assets (kitten.jpg, puppy.jpg, duckling.jpg)
├── demo.py          # Original Flet Controls Showcase (renamed from main.py)
├── main.py          # Main application entry point (TUUI-inspired UI)
├── pyproject.toml   # Python project configuration and dependencies
└── uv.lock         # Locked dependency versions
```

## Development Commands

```bash
# Install/update dependencies
uv sync

# Run the application
uv run main.py

# Run the original demo
uv run demo.py

# Format code
uv run ruff format .

# Lint code
uv run ruff check .

# Fix linting issues
uv run ruff check . --fix
```

## Git Guidelines

- **Branch**: `main` (not `master`)
- **Commit Messages**: Use imperative mood ("Add feature" not "Added feature")
- **Co-author**: Include `Generated by Mistral Vibe. Co-Authored-By: Mistral Vibe <vibe@mistral.ai>`
- **Small Commits**: Make small, focused commits with clear messages

## Flet 0.80.0 API Notes

### Breaking Changes from Previous Versions

1. **Icons**: Use `ft.Icons.ICON_NAME` (capital I), not `ft.icons.ICON_NAME`
2. **Colors**: Use `ft.Colors.COLOR_NAME` (capital C), not `ft.colors.COLOR_NAME`
3. **Border**: Use `ft.Border.all()` (capital B), not `ft.border.all()`
4. **Padding**: Use `ft.Padding.only()` (capital P), not `ft.padding.only()`
5. **ImageFit**: Use `ft.BoxFit.COVER` instead of `ft.ImageFit.COVER`
6. **Button**: Use `ft.Button` instead of deprecated `ft.ElevatedButton`
7. **Tab Structure**: Tabs now use `TabBar` and `TabBarView` within a `Tabs` container
8. **Badge**: Now a property on other controls (like Icon), not standalone
9. **Tooltip**: Now a property on controls, not a wrapping control
10. **App Entry**: Use `ft.run(main)` instead of deprecated `ft.app(target=main)`

### Asset Management

Local assets must be:
1. Stored in an `assets/` directory
2. Referenced with leading slash: `/filename.jpg`
3. Configured in `ft.run()`: `ft.run(main, assets_dir="assets")`

## Agent Best Practices

When working with this codebase:

1. **Respect the uv setup**: NEVER use `pip`, `poetry`, or other dependency tools. Use `uv` exclusively.
2. **Follow type annotations**: All functions must have type annotations.
3. **Run static analysis**: Always run `ruff format` and `ruff check` before committing.
4. **Test incrementally**: Make small changes and test frequently with `uv run main.py`.
5. **Follow patterns**: Use existing code patterns for consistency.
6. **Keep it clean**: Do not introduce unnecessary dependencies or tools.
7. **Document changes**: Update this file when adding new patterns or conventions.
